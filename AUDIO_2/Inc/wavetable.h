/* sine wave table ripped from http://aquaticus.info/pwm-sine-wave */
#include "main.h"

#define WAVETABLE1_SIZE 256

#define WAVETABLE2_SIZE 2048

uint8_t wave[WAVETABLE1_SIZE] = {
  0x80, 0x83, 0x86, 0x89, 0x8C, 0x90, 0x93, 0x96,
  0x99, 0x9C, 0x9F, 0xA2, 0xA5, 0xA8, 0xAB, 0xAE,
  0xB1, 0xB3, 0xB6, 0xB9, 0xBC, 0xBF, 0xC1, 0xC4,
  0xC7, 0xC9, 0xCC, 0xCE, 0xD1, 0xD3, 0xD5, 0xD8,
  0xDA, 0xDC, 0xDE, 0xE0, 0xE2, 0xE4, 0xE6, 0xE8,
  0xEA, 0xEB, 0xED, 0xEF, 0xF0, 0xF1, 0xF3, 0xF4,
  0xF5, 0xF6, 0xF8, 0xF9, 0xFA, 0xFA, 0xFB, 0xFC,
  0xFD, 0xFD, 0xFE, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE, 0xFD,
  0xFD, 0xFC, 0xFB, 0xFA, 0xFA, 0xF9, 0xF8, 0xF6,
  0xF5, 0xF4, 0xF3, 0xF1, 0xF0, 0xEF, 0xED, 0xEB,
  0xEA, 0xE8, 0xE6, 0xE4, 0xE2, 0xE0, 0xDE, 0xDC,
  0xDA, 0xD8, 0xD5, 0xD3, 0xD1, 0xCE, 0xCC, 0xC9,
  0xC7, 0xC4, 0xC1, 0xBF, 0xBC, 0xB9, 0xB6, 0xB3,
  0xB1, 0xAE, 0xAB, 0xA8, 0xA5, 0xA2, 0x9F, 0x9C,
  0x99, 0x96, 0x93, 0x90, 0x8C, 0x89, 0x86, 0x83,
  0x80, 0x7D, 0x7A, 0x77, 0x74, 0x70, 0x6D, 0x6A,
  0x67, 0x64, 0x61, 0x5E, 0x5B, 0x58, 0x55, 0x52,
  0x4F, 0x4D, 0x4A, 0x47, 0x44, 0x41, 0x3F, 0x3C,
  0x39, 0x37, 0x34, 0x32, 0x2F, 0x2D, 0x2B, 0x28,
  0x26, 0x24, 0x22, 0x20, 0x1E, 0x1C, 0x1A, 0x18,
  0x16, 0x15, 0x13, 0x11, 0x10, 0x0F, 0x0D, 0x0C,
  0x0B, 0x0A, 0x08, 0x07, 0x06, 0x06, 0x05, 0x04,
  0x03, 0x03, 0x02, 0x02, 0x02, 0x01, 0x01, 0x01,
  0x01, 0x01, 0x01, 0x01, 0x02, 0x02, 0x02, 0x03,
  0x03, 0x04, 0x05, 0x06, 0x06, 0x07, 0x08, 0x0A,
  0x0B, 0x0C, 0x0D, 0x0F, 0x10, 0x11, 0x13, 0x15,
  0x16, 0x18, 0x1A, 0x1C, 0x1E, 0x20, 0x22, 0x24,
  0x26, 0x28, 0x2B, 0x2D, 0x2F, 0x32, 0x34, 0x37,
  0x39, 0x3C, 0x3F, 0x41, 0x44, 0x47, 0x4A, 0x4D,
  0x4F, 0x52, 0x55, 0x58, 0x5B, 0x5E, 0x61, 0x64,
  0x67, 0x6A, 0x6D, 0x70, 0x74, 0x77, 0x7A, 0x7D
};

const int16_t sinewave[WAVETABLE2_SIZE] = {0,100,201,301,402,502,603,703,804,904,1005,1105,1206,1306,1406,1507,1607,1708,1808,1908,2009,2109,2209,2310,2410,2510,2610,2711,2811,2911,3011,3111,
3211,3311,3411,3511,3611,3711,3811,3911,4011,4110,4210,4310,4409,4509,4609,4708,4807,4907,5006,5106,5205,5304,5403,5502,5601,5701,5799,5898,5997,6096,6195,6293,
6392,6491,6589,6688,6786,6884,6983,7081,7179,7277,7375,7473,7571,7668,7766,7864,7961,8059,8156,8254,8351,8448,8545,8642,8739,8836,8933,9029,9126,9222,9319,9415,
9511,9608,9704,9800,9895,9991,10087,10183,10278,10373,10469,10564,10659,10754,10849,10944,11039,11133,11228,11322,11416,11510,11605,11699,11792,11886,11980,12073,12167,12260,12353,12446,
12539,12632,12725,12817,12910,13002,13094,13186,13278,13370,13462,13553,13645,13736,13827,13918,14009,14100,14191,14281,14372,14462,14552,14642,14732,14822,14911,15001,15090,15179,15268,15357,
15446,15535,15623,15711,15799,15887,15975,16063,16151,16238,16325,16412,16499,16586,16673,16759,16845,16932,17017,17103,17189,17274,17360,17445,17530,17615,17700,17784,17868,17953,18037,18120,
18204,18288,18371,18454,18537,18620,18703,18785,18867,18949,19031,19113,19195,19276,19357,19438,19519,19600,19680,19760,19841,19920,20000,20080,20159,20238,20317,20396,20475,20553,20631,20709,
20787,20865,20942,21019,21096,21173,21250,21326,21402,21478,21554,21630,21705,21780,21855,21930,22005,22079,22153,22227,22301,22375,22448,22521,22594,22667,22739,22811,22884,22955,23027,23098,
23170,23241,23311,23382,23452,23522,23592,23662,23731,23800,23869,23938,24007,24075,24143,24211,24279,24346,24413,24480,24547,24613,24680,24746,24811,24877,24942,25007,25072,25137,25201,25265,
25329,25393,25456,25519,25582,25645,25707,25770,25832,25893,25955,26016,26077,26138,26198,26259,26319,26378,26438,26497,26556,26615,26673,26732,26790,26847,26905,26962,27019,27076,27132,27189,
27245,27300,27356,27411,27466,27521,27575,27629,27683,27737,27790,27843,27896,27949,28001,28053,28105,28157,28208,28259,28310,28360,28410,28460,28510,28559,28609,28658,28706,28754,28803,28850,
28898,28945,28992,29039,29085,29131,29177,29223,29268,29313,29358,29403,29447,29491,29534,29578,29621,29664,29706,29749,29791,29832,29874,29915,29956,29996,30037,30077,30117,30156,30195,30234,
30273,30311,30349,30387,30424,30462,30498,30535,30571,30607,30643,30679,30714,30749,30783,30818,30852,30885,30919,30952,30985,31017,31050,31081,31113,31145,31176,31206,31237,31267,31297,31327,
31356,31385,31414,31442,31470,31498,31526,31553,31580,31607,31633,31659,31685,31710,31736,31760,31785,31809,31833,31857,31880,31903,31926,31949,31971,31993,32014,32036,32057,32077,32098,32118,
32137,32157,32176,32195,32213,32232,32250,32267,32285,32302,32318,32335,32351,32367,32382,32397,32412,32427,32441,32455,32469,32482,32495,32508,32521,32533,32545,32556,32567,32578,32589,32599,
32609,32619,32628,32637,32646,32655,32663,32671,32678,32685,32692,32699,32705,32711,32717,32722,32728,32732,32737,32741,32745,32748,32752,32755,32757,32759,32761,32763,32765,32766,32766,32767,
32767,32767,32766,32766,32765,32763,32761,32759,32757,32755,32752,32748,32745,32741,32737,32732,32728,32722,32717,32711,32705,32699,32692,32685,32678,32671,32663,32655,32646,32637,32628,32619,
32609,32599,32589,32578,32567,32556,32545,32533,32521,32508,32495,32482,32469,32455,32441,32427,32412,32397,32382,32367,32351,32335,32318,32302,32285,32267,32250,32232,32213,32195,32176,32157,
32137,32118,32098,32077,32057,32036,32014,31993,31971,31949,31926,31903,31880,31857,31833,31809,31785,31760,31736,31710,31685,31659,31633,31607,31580,31553,31526,31498,31470,31442,31414,31385,
31356,31327,31297,31267,31237,31206,31176,31145,31113,31081,31050,31017,30985,30952,30919,30885,30852,30818,30783,30749,30714,30679,30643,30607,30571,30535,30498,30462,30424,30387,30349,30311,
30273,30234,30195,30156,30117,30077,30037,29996,29956,29915,29874,29832,29791,29749,29706,29664,29621,29578,29534,29491,29447,29403,29358,29313,29268,29223,29177,29131,29085,29039,28992,28945,
28898,28850,28803,28754,28706,28658,28609,28559,28510,28460,28410,28360,28310,28259,28208,28157,28105,28053,28001,27949,27896,27843,27790,27737,27683,27629,27575,27521,27466,27411,27356,27300,
27245,27189,27132,27076,27019,26962,26905,26847,26790,26732,26673,26615,26556,26497,26438,26378,26319,26259,26198,26138,26077,26016,25955,25893,25832,25770,25707,25645,25582,25519,25456,25393,
25329,25265,25201,25137,25072,25007,24942,24877,24811,24746,24680,24613,24547,24480,24413,24346,24279,24211,24143,24075,24007,23938,23869,23800,23731,23662,23592,23522,23452,23382,23311,23241,
23170,23098,23027,22955,22884,22811,22739,22667,22594,22521,22448,22375,22301,22227,22153,22079,22005,21930,21855,21780,21705,21630,21554,21478,21402,21326,21250,21173,21096,21019,20942,20865,
20787,20709,20631,20553,20475,20396,20317,20238,20159,20080,20000,19920,19841,19760,19680,19600,19519,19438,19357,19276,19195,19113,19031,18949,18867,18785,18703,18620,18537,18454,18371,18288,
18204,18120,18037,17953,17868,17784,17700,17615,17530,17445,17360,17274,17189,17103,17017,16932,16845,16759,16673,16586,16499,16412,16325,16238,16151,16063,15975,15887,15799,15711,15623,15535,
15446,15357,15268,15179,15090,15001,14911,14822,14732,14642,14552,14462,14372,14281,14191,14100,14009,13918,13827,13736,13645,13553,13462,13370,13278,13186,13094,13002,12910,12817,12725,12632,
12539,12446,12353,12260,12167,12073,11980,11886,11792,11699,11605,11510,11416,11322,11228,11133,11039,10944,10849,10754,10659,10564,10469,10373,10278,10183,10087,9991,9895,9800,9704,9608,
9511,9415,9319,9222,9126,9029,8933,8836,8739,8642,8545,8448,8351,8254,8156,8059,7961,7864,7766,7668,7571,7473,7375,7277,7179,7081,6983,6884,6786,6688,6589,6491,
6392,6293,6195,6096,5997,5898,5799,5701,5601,5502,5403,5304,5205,5106,5006,4907,4807,4708,4609,4509,4409,4310,4210,4110,4011,3911,3811,3711,3611,3511,3411,3311,
3211,3111,3011,2911,2811,2711,2610,2510,2410,2310,2209,2109,2009,1908,1808,1708,1607,1507,1406,1306,1206,1105,1005,904,804,703,603,502,402,301,201,100,
0,-101,-202,-302,-403,-503,-604,-704,-805,-905,-1006,-1106,-1207,-1307,-1407,-1508,-1608,-1709,-1809,-1909,-2010,-2110,-2210,-2311,-2411,-2511,-2611,-2712,-2812,-2912,-3012,-3112,
-3212,-3312,-3412,-3512,-3612,-3712,-3812,-3912,-4012,-4111,-4211,-4311,-4410,-4510,-4610,-4709,-4808,-4908,-5007,-5107,-5206,-5305,-5404,-5503,-5602,-5702,-5800,-5899,-5998,-6097,-6196,-6294,
-6393,-6492,-6590,-6689,-6787,-6885,-6984,-7082,-7180,-7278,-7376,-7474,-7572,-7669,-7767,-7865,-7962,-8060,-8157,-8255,-8352,-8449,-8546,-8643,-8740,-8837,-8934,-9030,-9127,-9223,-9320,-9416,
-9512,-9609,-9705,-9801,-9896,-9992,-10088,-10184,-10279,-10374,-10470,-10565,-10660,-10755,-10850,-10945,-11040,-11134,-11229,-11323,-11417,-11511,-11606,-11700,-11793,-11887,-11981,-12074,-12168,-12261,-12354,-12447,
-12540,-12633,-12726,-12818,-12911,-13003,-13095,-13187,-13279,-13371,-13463,-13554,-13646,-13737,-13828,-13919,-14010,-14101,-14192,-14282,-14373,-14463,-14553,-14643,-14733,-14823,-14912,-15002,-15091,-15180,-15269,-15358,
-15447,-15536,-15624,-15712,-15800,-15888,-15976,-16064,-16152,-16239,-16326,-16413,-16500,-16587,-16674,-16760,-16846,-16933,-17018,-17104,-17190,-17275,-17361,-17446,-17531,-17616,-17701,-17785,-17869,-17954,-18038,-18121,
-18205,-18289,-18372,-18455,-18538,-18621,-18704,-18786,-18868,-18950,-19032,-19114,-19196,-19277,-19358,-19439,-19520,-19601,-19681,-19761,-19842,-19921,-20001,-20081,-20160,-20239,-20318,-20397,-20476,-20554,-20632,-20710,
-20788,-20866,-20943,-21020,-21097,-21174,-21251,-21327,-21403,-21479,-21555,-21631,-21706,-21781,-21856,-21931,-22006,-22080,-22154,-22228,-22302,-22376,-22449,-22522,-22595,-22668,-22740,-22812,-22885,-22956,-23028,-23099,
-23171,-23242,-23312,-23383,-23453,-23523,-23593,-23663,-23732,-23801,-23870,-23939,-24008,-24076,-24144,-24212,-24280,-24347,-24414,-24481,-24548,-24614,-24681,-24747,-24812,-24878,-24943,-25008,-25073,-25138,-25202,-25266,
-25330,-25394,-25457,-25520,-25583,-25646,-25708,-25771,-25833,-25894,-25956,-26017,-26078,-26139,-26199,-26260,-26320,-26379,-26439,-26498,-26557,-26616,-26674,-26733,-26791,-26848,-26906,-26963,-27020,-27077,-27133,-27190,
-27246,-27301,-27357,-27412,-27467,-27522,-27576,-27630,-27684,-27738,-27791,-27844,-27897,-27950,-28002,-28054,-28106,-28158,-28209,-28260,-28311,-28361,-28411,-28461,-28511,-28560,-28610,-28659,-28707,-28755,-28804,-28851,
-28899,-28946,-28993,-29040,-29086,-29132,-29178,-29224,-29269,-29314,-29359,-29404,-29448,-29492,-29535,-29579,-29622,-29665,-29707,-29750,-29792,-29833,-29875,-29916,-29957,-29997,-30038,-30078,-30118,-30157,-30196,-30235,
-30274,-30312,-30350,-30388,-30425,-30463,-30499,-30536,-30572,-30608,-30644,-30680,-30715,-30750,-30784,-30819,-30853,-30886,-30920,-30953,-30986,-31018,-31051,-31082,-31114,-31146,-31177,-31207,-31238,-31268,-31298,-31328,
-31357,-31386,-31415,-31443,-31471,-31499,-31527,-31554,-31581,-31608,-31634,-31660,-31686,-31711,-31737,-31761,-31786,-31810,-31834,-31858,-31881,-31904,-31927,-31950,-31972,-31994,-32015,-32037,-32058,-32078,-32099,-32119,
-32138,-32158,-32177,-32196,-32214,-32233,-32251,-32268,-32286,-32303,-32319,-32336,-32352,-32368,-32383,-32398,-32413,-32428,-32442,-32456,-32470,-32483,-32496,-32509,-32522,-32534,-32546,-32557,-32568,-32579,-32590,-32600,
-32610,-32620,-32629,-32638,-32647,-32656,-32664,-32672,-32679,-32686,-32693,-32700,-32706,-32712,-32718,-32723,-32729,-32733,-32738,-32742,-32746,-32749,-32753,-32756,-32758,-32760,-32762,-32764,-32766,-32767,-32767,-32768,
-32768,-32768,-32767,-32767,-32766,-32764,-32762,-32760,-32758,-32756,-32753,-32749,-32746,-32742,-32738,-32733,-32729,-32723,-32718,-32712,-32706,-32700,-32693,-32686,-32679,-32672,-32664,-32656,-32647,-32638,-32629,-32620,
-32610,-32600,-32590,-32579,-32568,-32557,-32546,-32534,-32522,-32509,-32496,-32483,-32470,-32456,-32442,-32428,-32413,-32398,-32383,-32368,-32352,-32336,-32319,-32303,-32286,-32268,-32251,-32233,-32214,-32196,-32177,-32158,
-32138,-32119,-32099,-32078,-32058,-32037,-32015,-31994,-31972,-31950,-31927,-31904,-31881,-31858,-31834,-31810,-31786,-31761,-31737,-31711,-31686,-31660,-31634,-31608,-31581,-31554,-31527,-31499,-31471,-31443,-31415,-31386,
-31357,-31328,-31298,-31268,-31238,-31207,-31177,-31146,-31114,-31082,-31051,-31018,-30986,-30953,-30920,-30886,-30853,-30819,-30784,-30750,-30715,-30680,-30644,-30608,-30572,-30536,-30499,-30463,-30425,-30388,-30350,-30312,
-30274,-30235,-30196,-30157,-30118,-30078,-30038,-29997,-29957,-29916,-29875,-29833,-29792,-29750,-29707,-29665,-29622,-29579,-29535,-29492,-29448,-29404,-29359,-29314,-29269,-29224,-29178,-29132,-29086,-29040,-28993,-28946,
-28899,-28851,-28804,-28755,-28707,-28659,-28610,-28560,-28511,-28461,-28411,-28361,-28311,-28260,-28209,-28158,-28106,-28054,-28002,-27950,-27897,-27844,-27791,-27738,-27684,-27630,-27576,-27522,-27467,-27412,-27357,-27301,
-27246,-27190,-27133,-27077,-27020,-26963,-26906,-26848,-26791,-26733,-26674,-26616,-26557,-26498,-26439,-26379,-26320,-26260,-26199,-26139,-26078,-26017,-25956,-25894,-25833,-25771,-25708,-25646,-25583,-25520,-25457,-25394,
-25330,-25266,-25202,-25138,-25073,-25008,-24943,-24878,-24812,-24747,-24681,-24614,-24548,-24481,-24414,-24347,-24280,-24212,-24144,-24076,-24008,-23939,-23870,-23801,-23732,-23663,-23593,-23523,-23453,-23383,-23312,-23242,
-23171,-23099,-23028,-22956,-22885,-22812,-22740,-22668,-22595,-22522,-22449,-22376,-22302,-22228,-22154,-22080,-22006,-21931,-21856,-21781,-21706,-21631,-21555,-21479,-21403,-21327,-21251,-21174,-21097,-21020,-20943,-20866,
-20788,-20710,-20632,-20554,-20476,-20397,-20318,-20239,-20160,-20081,-20001,-19921,-19842,-19761,-19681,-19601,-19520,-19439,-19358,-19277,-19196,-19114,-19032,-18950,-18868,-18786,-18704,-18621,-18538,-18455,-18372,-18289,
-18205,-18121,-18038,-17954,-17869,-17785,-17701,-17616,-17531,-17446,-17361,-17275,-17190,-17104,-17018,-16933,-16846,-16760,-16674,-16587,-16500,-16413,-16326,-16239,-16152,-16064,-15976,-15888,-15800,-15712,-15624,-15536,
-15447,-15358,-15269,-15180,-15091,-15002,-14912,-14823,-14733,-14643,-14553,-14463,-14373,-14282,-14192,-14101,-14010,-13919,-13828,-13737,-13646,-13554,-13463,-13371,-13279,-13187,-13095,-13003,-12911,-12818,-12726,-12633,
-12540,-12447,-12354,-12261,-12168,-12074,-11981,-11887,-11793,-11700,-11606,-11511,-11417,-11323,-11229,-11134,-11040,-10945,-10850,-10755,-10660,-10565,-10470,-10374,-10279,-10184,-10088,-9992,-9896,-9801,-9705,-9609,
-9512,-9416,-9320,-9223,-9127,-9030,-8934,-8837,-8740,-8643,-8546,-8449,-8352,-8255,-8157,-8060,-7962,-7865,-7767,-7669,-7572,-7474,-7376,-7278,-7180,-7082,-6984,-6885,-6787,-6689,-6590,-6492,
-6393,-6294,-6196,-6097,-5998,-5899,-5800,-5702,-5602,-5503,-5404,-5305,-5206,-5107,-5007,-4908,-4808,-4709,-4610,-4510,-4410,-4311,-4211,-4111,-4012,-3912,-3812,-3712,-3612,-3512,-3412,-3312,
-3212,-3112,-3012,-2912,-2812,-2712,-2611,-2511,-2411,-2311,-2210,-2110,-2010,-1909,-1809,-1709,-1608,-1508,-1407,-1307,-1207,-1106,-1006,-905,-805,-704,-604,-503,-403,-302,-202,-101,
    };

